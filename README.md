Mailtition
==========

Mailtition allows you to set up and collect signatures for a petition which can then be sent as an email to the person being petitioned from each person who has signed.  The petition letter can be customised by the user and all content can be moderated before being sent in either several batches or staggered over a shorter period of time.

Features
--------

    * Customisable user interface
    * Letter template editable by user
    * Moderate profanity and a self-defined blacklist
    * Send out messages staggered for maximum campaign impact
    * Review and remove content manually to prevent undesirable content being sent
    
Set-up
------

    1. Clone the repository into a directory on a PHP-enabled web server (httpd, Njinx, etc) with access to a MySQL database.
    2. Create a copy of templates/config-sample.php and call it templates/config.php.  Provide values as stated in the template.  Note that secretkey is stored in Base64.
    3. Create a copy of templates/letter-sample.json and call it templates/letter-sample.json.  Provide values as stated and remove the comments if you wish.
    4. Create two files templates/header.php and templates/footer.php.  If you do not wish to include a header and footer, these may be left blank.  You may use images in headers/footers by storing them in the templates folder.  Git will ignore most images stored there.
    5. If you wish to use non-default styling then create templates/custom.css and give CSS styles.
    6. Run setup.php to create the database table.
    
Usage
-----

For end-users index.php has all functions necesarry.  Mailtition does not allow editing after submission so no account system is needed.

For administrators, control has all control functions.  To log-in, visit control/index.php and enter the original value of secretkey.  The main menu will then display.

# View Submissions
This displays all letters which have been sent in and their current status.  Pending is used to represent posts which have not been moderated.  Ready are ones which have been.  Other status codes are self explanitory.  The message can be manually sent from here as well as reviewed and deleted.

# Auto-moderate
All posts will be checked against a given profanity filter and a self-defined blacklist.  All posts not making a hit are approved.  Posts with issues can be reviewed before being moderated out.  No automatic notifications are generated by this system

#Send-out
Letters are sent out via email to the to, cc and bcc lists specified in the letter.  The user is also bcc'd in on the message.  Their address is set as the reply-to.  Messages can be staggered to prevent overwhelming email systems, with X numbers of letters being sent every Y minutes.  This is achieved via Javascript so the pop-up this generates must remain open until sending is complete.